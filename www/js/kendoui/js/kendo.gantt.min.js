/** 
 * Kendo UI v2016.3.1216 (http://www.telerik.com/kendo-ui)                                                                                                                                              
 * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("util/main.min",["kendo.core.min"],e)}(function(){return function(){function e(e){return typeof e!==U}function t(e,t){var n=i(t);return I.round(e*n)/n}function i(e){return e?I.pow(10,e):1}function n(e,t,i){return I.max(I.min(e,i),t)}function s(e){return e*N}function r(e){return e/N}function a(e){return"number"==typeof e&&!isNaN(e)}function o(t,i){return e(t)?t:i}function u(e){return e*e}function d(e){var t,i=[];for(t in e)i.push(t+e[t]);return i.sort().join("")}function l(e){var t,i=2166136261;for(t=0;t<e.length;++t)i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24),i^=e.charCodeAt(t);return i>>>0}function c(e){return l(d(e))}function h(e){var t,i=e.length,n=M,s=L;for(t=0;t<i;t++)s=I.max(s,e[t]),n=I.min(n,e[t]);return{min:n,max:s}}function p(e){return h(e).min}function f(e){return h(e).max}function m(e){return g(e).min}function v(e){return g(e).max}function g(e){var t,i,n,s=M,r=L;for(t=0,i=e.length;t<i;t++)n=e[t],null!==n&&isFinite(n)&&(s=I.min(s,n),r=I.max(r,n));return{min:s===M?void 0:s,max:r===L?void 0:r}}function b(e){if(e)return e[e.length-1]}function _(e,t){return e.push.apply(e,t),e}function A(e){return W.template(e,{useWithBlock:!1,paramName:"d"})}function y(t,i){return e(i)&&null!==i?" "+t+"='"+i+"' ":""}function k(e){var t,i="";for(t=0;t<e.length;t++)i+=y(e[t][0],e[t][1]);return i}function w(t){var i,n,s="";for(i=0;i<t.length;i++)n=t[i][1],e(n)&&(s+=t[i][0]+":"+n+";");if(""!==s)return s}function D(e){return"string"!=typeof e&&(e+="px"),e}function F(e){var t,i,n=[];if(e)for(t=W.toHyphens(e).split("-"),i=0;i<t.length;i++)n.push("k-pos-"+t[i]);return n.join(" ")}function C(t){return""===t||null===t||"none"===t||"transparent"===t||!e(t)}function B(e){for(var t={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"},i=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],n="";e>0;)e<i[0]?i.shift():(n+=t[i[0]],e-=i[0]);return n}function E(e){var t,i,n,s,r;for(e=e.toLowerCase(),t={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3},i=0,n=0,s=0;s<e.length;++s){if(r=t[e.charAt(s)],!r)return null;i+=r,r>n&&(i-=2*n),n=r}return i}function S(e){var t=Object.create(null);return function(){var i,n="";for(i=arguments.length;--i>=0;)n+=":"+arguments[i];return n in t?t[n]:t[n]=e.apply(this,arguments)}}function T(e){for(var t,i,n=[],s=0,r=e.length;s<r;)t=e.charCodeAt(s++),t>=55296&&t<=56319&&s<r?(i=e.charCodeAt(s++),56320==(64512&i)?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),s--)):n.push(t);return n}function x(e){return e.map(function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)}).join("")}function R(e,t){function i(e,i){for(var n=[],s=0,r=0,a=0;s<e.length&&r<i.length;)t(e[s],i[r])<=0?n[a++]=e[s++]:n[a++]=i[r++];return s<e.length&&n.push.apply(n,e.slice(s)),r<i.length&&n.push.apply(n,i.slice(r)),n}return e.length<2?e.slice():function n(e){var t,s,r;return e.length<=1?e:(t=Math.floor(e.length/2),s=e.slice(0,t),r=e.slice(t),s=n(s),r=n(r),i(s,r))}(e)}function H(e){return z.test(e)}var z,I=Math,W=window.kendo,P=W.deepExtend,N=I.PI/180,M=Number.MAX_VALUE,L=-Number.MAX_VALUE,U="undefined",q=Date.now;q||(q=function(){return(new Date).getTime()}),P(W,{util:{MAX_NUM:M,MIN_NUM:L,append:_,arrayLimits:h,arrayMin:p,arrayMax:f,defined:e,deg:r,hashKey:l,hashObject:c,isNumber:a,isTransparent:C,last:b,limitValue:n,now:q,objectKey:d,round:t,rad:s,renderAttr:y,renderAllAttr:k,renderPos:F,renderSize:D,renderStyle:w,renderTemplate:A,sparseArrayLimits:g,sparseArrayMin:m,sparseArrayMax:v,sqr:u,valueOrDefault:o,romanToArabic:E,arabicToRoman:B,memoize:S,ucs2encode:x,ucs2decode:T,mergeSort:R,isUnicodeLetter:H}}),W.drawing.util=W.util,W.dataviz.util=W.util,z=RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]")}(),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(e,define){define("util/text-metrics.min",["kendo.core.min","util/main.min"],e)}(function(){!function(e){function t(){return{width:0,height:0,baseline:0}}function i(e,t,i){return c.current.measure(e,t,i)}function n(e,t){var i=[];if(e.length>0&&document.fonts){try{i=e.map(function(e){return document.fonts.load(e)})}catch(n){r.logToConsole(n)}Promise.all(i).then(t,t)}else t()}var s=document,r=window.kendo,a=r.Class,o=r.util,u=o.defined,d=a.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var i=this,n=i._map,s={key:e,value:t};n[e]=s,i._head?(i._tail.newer=s,s.older=i._tail,i._tail=s):i._head=i._tail=s,i._length>=i._size?(n[i._head.key]=null,i._head=i._head.newer,i._head.older=null):i._length++},get:function(e){var t=this,i=t._map[e];if(i)return i===t._head&&i!==t._tail&&(t._head=i.newer,t._head.older=null),i!==t._tail&&(i.older&&(i.older.newer=i.newer,i.newer.older=i.older),i.older=t._tail,i.newer=null,t._tail.newer=i,t._tail=i),i.value}}),l=e("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;' />")[0],c=a.extend({init:function(e){this._cache=new d(1e3),this._initOptions(e)},options:{baselineMarkerSize:1},measure:function(i,n,r){var a,d,c,h,p,f,m,v;if(!i)return t();if(a=o.objectKey(n),d=o.hashKey(i+a),c=this._cache.get(d),c)return c;h=t(),p=r?r:l,f=this._baselineMarker().cloneNode(!1);for(m in n)v=n[m],u(v)&&(p.style[m]=v);return e(p).text(i),p.appendChild(f),s.body.appendChild(p),(i+"").length&&(h.width=p.offsetWidth-this.options.baselineMarkerSize,h.height=p.offsetHeight,h.baseline=f.offsetTop+this.options.baselineMarkerSize),h.width>0&&h.height>0&&this._cache.put(d,h),p.parentNode.removeChild(p),h},_baselineMarker:function(){return e("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;' />")[0]}});c.current=new c,r.util.TextMetrics=c,r.util.LRUCache=d,r.util.loadFonts=n,r.util.measureText=i}(window.kendo.jQuery)},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(e,define){define("util/base64.min",["util/main.min"],e)}(function(){return function(){function e(e){var i,n,s,a,o,u,d,l="",c=0;for(e=t(e);c<e.length;)i=e.charCodeAt(c++),n=e.charCodeAt(c++),s=e.charCodeAt(c++),a=i>>2,o=(3&i)<<4|n>>4,u=(15&n)<<2|s>>6,d=63&s,isNaN(n)?u=d=64:isNaN(s)&&(d=64),l=l+r.charAt(a)+r.charAt(o)+r.charAt(u)+r.charAt(d);return l}function t(e){var t,i,n="";for(t=0;t<e.length;t++)i=e.charCodeAt(t),i<128?n+=s(i):i<2048?(n+=s(192|i>>>6),n+=s(128|63&i)):i<65536&&(n+=s(224|i>>>12),n+=s(128|i>>>6&63),n+=s(128|63&i));return n}var i=window.kendo,n=i.deepExtend,s=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n(i.util,{encodeBase64:e,encodeUTF8:t})}(),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(e,define){define("mixins/observers.min",["kendo.core.min"],e)}(function(){return function(e){var t=Math,i=window.kendo,n=i.deepExtend,s=e.inArray,r={observers:function(){return this._observers=this._observers||[]},addObserver:function(e){return this._observers?this._observers.push(e):this._observers=[e],this},removeObserver:function(e){var t=this.observers(),i=s(e,t);return i!=-1&&t.splice(i,1),this},trigger:function(e,t){var i,n,s=this._observers;if(s&&!this._suspended)for(n=0;n<s.length;n++)i=s[n],i[e]&&i[e](t);return this},optionsChange:function(e){e=e||{},e.element=this,this.trigger("optionsChange",e)},geometryChange:function(){this.trigger("geometryChange",{element:this})},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=t.max((this._suspended||0)-1,0),this},_observerField:function(e,t){this[e]&&this[e].removeObserver(this),this[e]=t,t.addObserver(this)}};n(i,{mixins:{ObserversMixin:r}})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(e,define){define("kendo.gantt.min",["kendo.data.min","kendo.popup.min","kendo.window.min","kendo.resizable.min","kendo.gantt.list.min","kendo.gantt.timeline.min","kendo.grid.min","kendo.pdf.min"],e)}(function(){return function(e,t){function i(e){return"["+m.attr("uid")+(e?"='"+e+"']":"]")}function n(e){return delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate,e}function s(e){var t,i,n,s,r,a;if(e.filter("[name=end], [name=start]").length){for(t=e.attr("name"),i=m.widgetInstance(e,m.ui),n={},s=e;s!==window&&!r;)s=s.parent(),r=s.data("kendoEditable");return!(a=r?r.options.model:null)||(n.start=a.start,n.end=a.end,n[t]=i?i.value():m.parseDate(e.value()),n.start<=n.end)}return!0}function r(t,i){var n=t.parents("["+m.attr("role")+'="gantt"]'),s=[],r=a(n);t.attr(N,0),i&&r.each(function(t,i){s[t]=e(i).scrollTop()});try{t[0].setActive()}catch(o){t[0].focus()}i&&r.each(function(t,i){e(i).scrollTop(s[t])})}function a(t){return e(t).parentsUntil("body").filter(function(e,t){var i=m.getComputedStyles(t,["overflow"]);return"visible"!=i.overflow}).add(window)}var o,u,d,l,c,h,p,f,m=window.kendo,v="matchMedia"in window,g=m.support.browser,b=m.support.mobileOS,_=m.Observable,A=m.ui.Widget,y=m.data.DataSource,k=m.data.ObservableObject,w=m.data.ObservableArray,D=m.data.Query,F=e.isArray,C=e.inArray,B=m.isFunction,E=e.proxy,S=e.extend,T=e.isPlainObject,x=e.map,R=m._outerWidth,H=m._outerHeight,z=m.keys,I=3,W=".kendoGantt",P="p0",N="tabIndex",M="click",L="width",U="string",q={down:{origin:"bottom left",position:"top left"},up:{origin:"top left",position:"bottom left"}},O="aria-activedescendant",j="gantt_active_cell",G="action-option-focused",V=".",Q="Are you sure you want to delete this task?",K="Are you sure you want to delete this dependency?",X=m.template('<button class="#=styles.buttonToggle#" type="button"><span class="#=styles.iconToggle#">&nbps;</span></button>'),Y='<button class="#=styles.button# #=className#" type="button" #if (action) {#data-action="#=action#"#}#><span class="#=iconClass#"></span><span>#=text#</span></button>',J='<a class="#=className#" #=attr# href="\\#">#=text#</a>',Z=m.template('<li class="#=styles.currentView# #=styles.viewButtonDefault#"><a href="\\#" class="#=styles.link#">&nbps;</a></li>'),$=m.template('<ul class="#=styles.viewsWrapper#">#for(var view in views){#<li class="#=styles.viewButtonDefault# #=styles.viewButton#-#= view.toLowerCase() #" data-#=ns#name="#=view#"><a href="\\#" class="#=styles.link#">#=views[view].title#</a></li>#}#</ul>'),ee=m.template('<div class="#=styles.popupWrapper#"><ul class="#=styles.popupList#" role="listbox">#for(var i = 0, l = actions.length; i < l; i++){#<li class="#=styles.item#" data-action="#=actions[i].data#" role="option">#=actions[i].text#</span>#}#</ul></div>'),te=function(t,i){var n={name:i.field},s=i.model.fields[i.field].validation;s&&T(s)&&s.message&&(n[m.attr("dateCompare-msg")]=s.message),e('<input type="text" required '+m.attr("type")+'="date" '+m.attr("role")+'="datetimepicker" '+m.attr("bind")+'="value:'+i.field+'" '+m.attr("validate")+"='true' />").attr(n).appendTo(t),e("<span "+m.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},ie=function(t,i){e('<a href="#" class="'+i.styles.button+'">'+i.messages.assignButton+"</a>").click(i.click).appendTo(t)},ne={wrapper:"k-widget k-gantt",rowHeight:"k-gantt-rowheight",listWrapper:"k-gantt-layout k-gantt-treelist",list:"k-gantt-treelist",timelineWrapper:"k-gantt-layout k-gantt-timeline",timeline:"k-gantt-timeline",splitBarWrapper:"k-splitbar k-state-default k-splitbar-horizontal k-splitbar-draggable-horizontal k-gantt-layout",splitBar:"k-splitbar",splitBarHover:"k-splitbar-horizontal-hover",popupWrapper:"k-list-container",popupList:"k-list k-reset",resizeHandle:"k-resize-handle",icon:"k-icon",item:"k-item",line:"k-line",buttonDelete:"k-gantt-delete",buttonCancel:"k-gantt-cancel",buttonSave:"k-gantt-update",buttonToggle:"k-gantt-toggle",primary:"k-primary",hovered:"k-state-hover",selected:"k-state-selected",focused:"k-state-focused",gridHeader:"k-grid-header",gridHeaderWrap:"k-grid-header-wrap",gridContent:"k-grid-content",popup:{form:"k-popup-edit-form",editForm:"k-gantt-edit-form",formContainer:"k-edit-form-container",resourcesFormContainer:"k-resources-form-container",message:"k-popup-message",buttonsContainer:"k-edit-buttons k-state-default",button:"k-button",editField:"k-edit-field",editLabel:"k-edit-label",resourcesField:"k-gantt-resources"},toolbar:{headerWrapper:"k-floatwrap k-header k-gantt-toolbar",footerWrapper:"k-floatwrap k-header k-gantt-toolbar",toolbar:"k-gantt-toolbar",expanded:"k-state-expanded",views:"k-gantt-views",viewsWrapper:"k-reset k-header k-gantt-views",actions:"k-gantt-actions",button:"k-button k-button-icontext",buttonToggle:"k-button k-button-icon k-gantt-toggle",iconPlus:"k-icon k-i-plus",iconPdf:"k-icon k-i-pdf",iconToggle:"k-icon k-i-gantt-toggle",viewButtonDefault:"k-state-default",viewButton:"k-view",currentView:"k-current-view",link:"k-link",pdfButton:"k-gantt-pdf",appendButton:"k-gantt-create"}},se=_.extend({init:function(e,t){_.fn.init.call(this),this.element=e,this.options=S(!0,{},this.options,t),this._popup()},options:{direction:"down",navigatable:!1},_current:function(e){var t=f.styles,i=this.list.find(V+t.focused),n=i[e]();n.length&&(i.removeClass(t.focused).removeAttr("id"),n.addClass(t.focused).attr("id",G),this.list.find("ul").removeAttr(O).attr(O,G))},_popup:function(){var t=this,i=f.styles,n="li"+V+i.item,s=V+i.toolbar.appendButton,r=this.options.messages.actions,a=this.options.navigatable;this.list=e(ee({styles:i,actions:[{data:"add",text:r.addChild},{data:"insert-before",text:r.insertBefore},{data:"insert-after",text:r.insertAfter}]})),this.element.append(this.list),this.popup=new m.ui.Popup(this.list,S({anchor:this.element.find(s),open:function(){t._adjustListWidth()},animation:this.options.animation},q[this.options.direction])),this.element.on(M+W,s,function(n){var s=e(this),r=s.attr(m.attr("action"));n.preventDefault(),r?t.trigger("command",{type:r}):(t.popup.open(),a&&t.list.find("li:first").addClass(i.focused).attr("id",G).end().find("ul").attr({TABINDEX:0,"aria-activedescendant":G}).focus())}),this.list.find(n).hover(function(){e(this).addClass(i.hovered)},function(){e(this).removeClass(i.hovered)}).end().on(M+W,n,function(){t.trigger("command",{type:e(this).attr(m.attr("action"))}),t.popup.close()}),a&&(this.popup.bind("close",function(){t.list.find(n).removeClass(i.focused).end().find("ul").attr(N,0),t.element.parents("["+m.attr("role")+'="gantt"]').find(V+i.gridContent+" > table:first").focus()}),this.list.find("ul").on("keydown"+W,function(e){var n=e.keyCode;switch(n){case z.UP:e.preventDefault(),t._current("prev");break;case z.DOWN:e.preventDefault(),t._current("next");break;case z.ENTER:t.list.find(V+i.focused).click();break;case z.ESC:e.preventDefault(),t.popup.close()}}))},_adjustListWidth:function(){var e,t,i=this.list,n=f.styles,s=i[0].style.width,r=this.element.find(V+n.toolbar.appendButton),a=R(i);!i.data(L)&&s||(e=window.getComputedStyle?window.getComputedStyle(r[0],null):0,t=e?parseFloat(e.width):R(r),e&&(g.mozilla||g.msie)&&(t+=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)),s="border-box"!==i.css("box-sizing")?t-(R(i)-i.width()):t,a>s&&(s=a),i.css({fontFamily:r.css("font-family"),width:s}).data(L,s))},destroy:function(){clearTimeout(this._focusTimeout),this.popup.destroy(),this.element.off(W),this.list.off(W),this.unbind()}}),re=function(e,t){return function(i){var n,s;if(i=F(i)?{data:i}:i,n=i||{},s=n.data,n.data=s,!(n instanceof e)&&n instanceof y)throw Error("Incorrect DataSource type. Only "+t+" instances are supported");return n instanceof e?n:new e(n)}},ae=m.data.Model.define({id:"id",fields:{id:{type:"number"},predecessorId:{type:"number"},successorId:{type:"number"},type:{type:"number"}}}),oe=y.extend({init:function(e){y.fn.init.call(this,S(!0,{},{schema:{modelBase:ae,model:ae}},e))},successors:function(e){return this._dependencies("predecessorId",e)},predecessors:function(e){return this._dependencies("successorId",e)},dependencies:function(e){var t=this.predecessors(e),i=this.successors(e);return t.push.apply(t,i),t},_dependencies:function(e,t){var i=this.view(),n={field:e,operator:"eq",value:t};return i=new D(i).filter(n).toArray()}});oe.create=re(oe,"GanttDependencyDataSource"),u=m.data.Model.define({duration:function(){var e=this.end,t=this.start;return e-t},isMilestone:function(){return 0===this.duration()},_offset:function(e){var t,i,n=["start","end"];for(i=0;i<n.length;i++)t=new Date(this.get(n[i]).getTime()+e),this.set(n[i],t)},id:"id",fields:{id:{type:"number"},parentId:{type:"number",defaultValue:null,validation:{required:!0}},orderId:{type:"number",validation:{required:!0}},title:{type:"string",defaultValue:"New task"},start:{type:"date",validation:{required:!0}},end:{type:"date",validation:{required:!0,dateCompare:s,message:"End date should be after or equal to the start date"}},percentComplete:{type:"number",validation:{required:!0,min:0,max:1,step:.01}},summary:{type:"boolean"},expanded:{type:"boolean",defaultValue:!0}}}),d=y.extend({init:function(e){y.fn.init.call(this,S(!0,{},{schema:{modelBase:u,model:u}},e))},remove:function(e){var t=e.get("parentId"),i=this.taskAllChildren(e);return this._removeItems(i),e=y.fn.remove.call(this,e),this._childRemoved(t,e.get("orderId")),e},add:function(e){if(e)return e=this._toGanttTask(e),this.insert(this.taskSiblings(e).length,e)},insert:function(e,t){if(t)return t=this._toGanttTask(t),t.set("orderId",e),t=y.fn.insert.call(this,e,t),this._reorderSiblings(t,this.taskSiblings(t).length-1),this._resolveSummaryFields(this.taskParent(t)),t},taskChildren:function(e){var i,n=this.view(),s={field:"parentId",operator:"eq",value:null},r=this._sort&&this._sort.length?this._sort:{field:"orderId",dir:"asc"};if(e){if(i=e.get("id"),i===t||null===i||""===i)return[];s.value=i}return n=new D(n).filter(s).sort(r).toArray()},taskAllChildren:function(e){var t=[],i=this,n=function(e){var s=i.taskChildren(e);t.push.apply(t,s),x(s,n)};return e?n(e):t=this.view(),t},taskSiblings:function(e){if(!e)return null;var t=this.taskParent(e);return this.taskChildren(t)},taskParent:function(e){return e&&null!==e.get("parentId")?this.get(e.parentId):null},taskLevel:function(e){for(var t=0,i=this.taskParent(e);null!==i;)t+=1,i=this.taskParent(i);return t},taskTree:function(e){var t,i,n,s,r=[],a=this.taskChildren(e);for(i=0,n=a.length;i<n;i++)t=a[i],r.push(t),t.get("expanded")&&(s=this.taskTree(t),r.push.apply(r,s));return r},update:function(e,i){var n,s,r=this,a=function(e,t){var i,n,s=r.taskAllChildren(e);for(i=0,n=s.length;i<n;i++)s[i]._offset(t)},o=function(e){var t=e.field,i=e.sender;switch(t){case"start":r._resolveSummaryStart(r.taskParent(i)),a(i,i.get(t).getTime()-n.getTime());break;case"end":r._resolveSummaryEnd(r.taskParent(i));break;case"percentComplete":r._resolveSummaryPercentComplete(r.taskParent(i));break;case"orderId":r._reorderSiblings(i,n)}};i.parentId!==t&&(n=e.get("parentId"),n!==i.parentId&&(e.set("parentId",i.parentId),r._childRemoved(n,e.get("orderId")),e.set("orderId",r.taskSiblings(e).length-1),r._resolveSummaryFields(r.taskParent(e))),delete i.parentId),e.bind("change",o);for(s in i)n=e.get(s),e.set(s,i[s]);e.unbind("change",o)},_resolveSummaryFields:function(e){e&&(this._updateSummary(e),this.taskChildren(e).length&&(this._resolveSummaryStart(e),this._resolveSummaryEnd(e),this._resolveSummaryPercentComplete(e)))},_resolveSummaryStart:function(e){var t=this,i=function(e){var i,n,s,r=t.taskChildren(e),a=r[0].start.getTime();for(n=1,s=r.length;n<s;n++)i=r[n].start.getTime(),i<a&&(a=i);return new Date(a)};this._updateSummaryRecursive(e,"start",i)},_resolveSummaryEnd:function(e){var t=this,i=function(e){var i,n,s,r=t.taskChildren(e),a=r[0].end.getTime();for(n=1,s=r.length;n<s;n++)i=r[n].end.getTime(),i>a&&(a=i);return new Date(a)};this._updateSummaryRecursive(e,"end",i)},_resolveSummaryPercentComplete:function(e){var t=this,i=function(e){var i=t.taskChildren(e),n=new D(i).aggregate([{field:"percentComplete",aggregate:"average"}]);return n.percentComplete.average};this._updateSummaryRecursive(e,"percentComplete",i)},_updateSummaryRecursive:function(e,t,i){var n,s;e&&(n=i(e),e.set(t,n),s=this.taskParent(e),s&&this._updateSummaryRecursive(s,t,i))},_childRemoved:function(e,t){var i,n,s=null===e?null:this.get(e),r=this.taskChildren(s);for(i=t,n=r.length;i<n;i++)r[i].set("orderId",i);this._resolveSummaryFields(s)},_reorderSiblings:function(e,t){var i,n=e.get("orderId"),s=n>t,r=s?t:n,a=s?n:t,o=s?r:r+1,u=this.taskSiblings(e);for(a=Math.min(a,u.length-1),i=r;i<=a;i++)u[i]!==e&&(u[i].set("orderId",o),o+=1)},_updateSummary:function(e){if(null!==e){var t=this.taskChildren(e).length;e.set("summary",t>0)}},_toGanttTask:function(e){if(!(e instanceof u)){var t=e;e=this._createNewModel(),e.accept(t)}return e}}),d.create=re(d,"GanttDataSource"),S(!0,m.data,{GanttDataSource:d,GanttTask:u,GanttDependencyDataSource:oe,GanttDependency:ae}),l={desktop:{dateRange:te,resources:ie}},c=m.Observable.extend({init:function(e,t){m.Observable.fn.init.call(this),this.element=e,this.options=S(!0,{},this.options,t),this.createButton=this.options.createButton},fields:function(t,i){var n,s=this,r=this.options,a=r.messages.editor,o=r.resources,u=function(e){e.preventDefault(),o.editor(s.container.find(V+f.styles.popup.resourcesField),i)};return r.editable.template?n=e.map(i.fields,function(e,t){return{field:t}}):(n=[{field:"title",title:a.title},{field:"start",title:a.start,editor:t.dateRange},{field:"end",title:a.end,editor:t.dateRange},{field:"percentComplete",title:a.percentComplete,format:P}],i.get(o.field)&&n.push({field:o.field,title:a.resources,messages:a,editor:t.resources,click:u,styles:f.styles.popup})),n},_buildEditTemplate:function(e,t,i){var n,s,r,a,o=this.options.resources,u=this.options.editable.template,d=S({},m.Template,this.options.templateSettings),l=d.paramName,c=f.styles.popup,h="";if(u)typeof u===U&&(u=window.unescape(u)),h+=m.template(u,d)(e);else for(n=0,s=t.length;n<s;n++)r=t[n],h+='<div class="'+c.editLabel+'"><label for="'+r.field+'">'+(r.title||r.field||"")+"</label></div>",r.field===o.field&&(h+='<div class="'+c.resourcesField+'" style="display:none"></div>'),!e.editable||e.editable(r.field)?(i.push(r),h+="<div "+m.attr("container-for")+'="'+r.field+'" class="'+c.editField+'"></div>'):(a="#:",r.field?(r=m.expr(r.field,l),a+=r+"==null?'':"+r):a+="''",a+="#",a=m.template(a,d),h+='<div class="'+c.editField+'">'+a(e)+"</div>");return h}}),h=c.extend({destroy:function(){this.close(),this.unbind()},editTask:function(e){this.editable=this._createPopupEditor(e)},close:function(){var e=this,t=function(){e.editable&&(e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};this.editable&&this.container.is(":visible")?(e.trigger("close",{window:e.container}),this.container.data("kendoWindow").bind("deactivate",t).close()):t()},showDialog:function(t){var i,n,s,r,a=t.buttons,o=f.styles.popup,u=m.format('<div class="{0}"><div class="{1}"><p class="{2}">{3}</p><div class="{4}">',o.form,o.formContainer,o.message,t.text,o.buttonsContainer);for(i=0,n=a.length;i<n;i++)u+=this.createButton(a[i]);u+="</div></div></div>",s=this.element,this.popup&&this.popup.destroy(),r=this.popup=e(u).appendTo(s).eq(0).on("click",V+o.button,function(t){t.preventDefault(),r.close();var i=e(t.currentTarget).index();a[i].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,deactivate:function(){this.destroy(),s.focus()}}).getKendoWindow(),r.center().open()},_createPopupEditor:function(t){var i,n,s=this,r={},a=this.options.messages,o=f.styles,u=o.popup,d=m.format('<div {0}="{1}" class="{2} {3}"><div class="{4}">',m.attr("uid"),t.uid,u.form,u.editForm,u.formContainer),c=this.fields(l.desktop,t),h=[];return d+=this._buildEditTemplate(t,c,h),d+='<div class="'+u.buttonsContainer+'">',d+=this.createButton({name:"update",text:a.save,className:f.styles.primary}),d+=this.createButton({name:"cancel",text:a.cancel}),s.options.editable.destroy!==!1&&(d+=this.createButton({name:"delete",text:a.destroy})),d+="</div></div></div>",i=this.container=e(d).appendTo(this.element).eq(0).kendoWindow(S({modal:!0,resizable:!1,draggable:!0,title:a.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&s.trigger("cancel",{container:i,model:t})&&e.preventDefault()}},r)),n=i.kendoEditable({fields:h,model:t,clearContainer:!1,validateOnBlur:!0,target:s.options.target}).data("kendoEditable"),m.cycleForm(i),this.trigger("edit",{container:i,model:t})?s.trigger("cancel",{container:i,model:t}):(i.data("kendoWindow").center().open(),i.on(M+W,V+o.buttonCancel,function(e){e.preventDefault(),e.stopPropagation(),s.trigger("cancel",{container:i,model:t})}),i.on(M+W,V+o.buttonSave,function(e){var n,r,a,o,u;for(e.preventDefault(),e.stopPropagation(),n=s.fields(l.desktop,t),r={},o=0,u=n.length;o<u;o++)a=n[o].field,r[a]=t.get(a);s.trigger("save",{container:i,model:t,updateInfo:r})}),i.on(M+W,V+o.buttonDelete,function(e){e.preventDefault(),e.stopPropagation(),s.trigger("remove",{container:i,model:t})})),n}}),p=A.extend({init:function(e,t){A.fn.init.call(this,e,t),this.wrapper=this.element,this.model=this.options.model,this.resourcesField=this.options.resourcesField,this.createButton=this.options.createButton,this._initContainer(),this._attachHandlers()},events:["save"],open:function(){this.window.center().open()},close:function(){this.window.bind("deactivate",E(this.destroy,this)).close()},destroy:function(){this._dettachHandlers(),this.grid.destroy(),this.grid=null,this.window.destroy(),this.window=null,A.fn.destroy.call(this),m.destroy(this.wrapper),this.element=this.wrapper=null},_attachHandlers:function(){var t=f.styles,i=this.grid,n=this._cancelProxy=E(this._cancel,this);this.container.on(M+W,V+t.buttonCancel,this._cancelProxy),this._saveProxy=E(this._save,this),this.container.on(M+W,V+t.buttonSave,this._saveProxy),this.window.bind("close",function(e){e.userTriggered&&n(e)}),i.wrapper.on(M+W,"input[type='checkbox']",function(){var t=e(this),n=e(t).closest("tr"),s=i.dataSource.getByUid(n.attr(m.attr("uid"))),r=e(t).is(":checked")?1:"";s.set("value",r)})},_dettachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.container.off(W),this.grid.wrapper.off()},_cancel:function(e){e.preventDefault(),this.close()},_save:function(e){e.preventDefault(),this._updateModel(),this.wrapper.is(V+f.styles.popup.resourcesField)||this.trigger("save",{container:this.wrapper,model:this.model}),this.close()},_initContainer:function(){var t=this,i=f.styles.popup,n=m.format('<div class="{0} {1}"><div class="{2} {3}"/></div>"',i.form,i.editForm,i.formContainer,i.resourcesFormContainer);n=e(n),this.container=n.find(V+i.resourcesFormContainer),
this.window=n.kendoWindow({modal:!0,resizable:!1,draggable:!0,visible:!1,title:this.options.messages.resourcesEditorTitle,open:function(){t.grid.resize(!0)}}).data("kendoWindow"),this._resourceGrid(),this._createButtons()},_resourceGrid:function(){var t=this,i=this.options.messages,n=e('<div id="resources-grid"/>').appendTo(this.container);this.grid=new m.ui.Grid(n,{columns:[{field:"name",title:i.resourcesHeader,template:"<label><input type='checkbox' value='#=name#'# if (value > 0 && value !== null) {#checked='checked'# } #/>#=name#</labe>"},{field:"value",title:i.unitsHeader,template:function(e){var t=e.format,i=null!==e.value?e.value:"";return t?m.toString(i,t):i}}],height:280,sortable:!0,editable:!0,filterable:!0,dataSource:{data:t.options.data,schema:{model:{id:"id",fields:{id:{from:"id"},name:{from:"name",type:"string",editable:!1},value:{from:"value",type:"number",defaultValue:""},format:{from:"format",type:"string"}}}}},save:function(e){var t=!!e.values.value;e.container.parent().find("input[type='checkbox']").prop("checked",t)}})},_createButtons:function(){var e,t,i=this.options.buttons,n='<div class="'+f.styles.popup.buttonsContainer+'">';for(e=0,t=i.length;e<t;e++)n+=this.createButton(i[e]);n+="</div>",this.container.append(n)},_updateModel:function(){var e,t,i,n=[],s=this.grid.dataSource.data();for(t=0,i=s.length;t<i;t++)e=s[t].get("value"),null!==e&&e>0&&n.push(s[t]);this.model[this.resourcesField]=n}}),f=A.extend({init:function(e,t,i){F(t)&&(t={dataSource:t}),o={append:{text:"Add Task",action:"add",className:f.styles.toolbar.appendButton,iconClass:f.styles.toolbar.iconPlus},pdf:{text:"Export to PDF",className:f.styles.toolbar.pdfButton,iconClass:f.styles.toolbar.iconPdf}},A.fn.init.call(this,e,t),i&&(this._events=i),this._wrapper(),this._resources(),this.options.views&&this.options.views.length||(this.options.views=["day","week","month"]),this._timeline(),this._toolbar(),this._footer(),this._adjustDimensions(),this._preventRefresh=!0,this.view(this.timeline._selectedViewName),this._preventRefresh=!1,this._dataSource(),this._assignments(),this._dropDowns(),this._list(),this._dependencies(),this._resizable(),this._scrollable(),this._dataBind(),this._attachEvents(),this._createEditor(),m.notify(this)},events:["dataBinding","dataBound","add","edit","remove","cancel","save","change","navigate","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","columnResize"],options:{name:"Gantt",autoBind:!0,navigatable:!1,selectable:!0,editable:!0,resizable:!1,columnResizeHandleWidth:I,columns:[],views:[],dataSource:{},dependencies:{},resources:{},assignments:{},taskTemplate:null,messages:{save:"Save",cancel:"Cancel",destroy:"Delete",deleteTaskConfirmation:Q,deleteDependencyConfirmation:K,deleteTaskWindowTitle:"Delete task",deleteDependencyWindowTitle:"Delete dependency",views:{day:"Day",week:"Week",month:"Month",year:"Year",start:"Start",end:"End"},actions:{append:"Add Task",addChild:"Add Child",insertBefore:"Add Above",insertAfter:"Add Below",pdf:"Export to PDF"},editor:{editorTitle:"Task",resourcesEditorTitle:"Resources",title:"Title",start:"Start",end:"End",percentComplete:"Complete",resources:"Resources",assignButton:"Assign",resourcesHeader:"Resources",unitsHeader:"Units"}},showWorkHours:!0,showWorkDays:!0,toolbar:null,workDayStart:new Date(1980,1,1,8,0,0),workDayEnd:new Date(1980,1,1,17,0,0),workWeekStart:1,workWeekEnd:5,hourSpan:1,snap:!0,height:600,listWidth:"30%",rowHeight:null},select:function(e){var i=this.list;return e?(i.select(e),t):i.select()},clearSelection:function(){this.list.clearSelection()},destroy:function(){A.fn.destroy.call(this),this.dataSource&&(this.dataSource.unbind("change",this._refreshHandler),this.dataSource.unbind("progress",this._progressHandler),this.dataSource.unbind("error",this._errorHandler)),this.dependencies&&(this.dependencies.unbind("change",this._dependencyRefreshHandler),this.dependencies.unbind("error",this._dependencyErrorHandler)),this.timeline&&(this.timeline.unbind(),this.timeline.destroy()),this.list&&(this.list.unbind(),this.list.destroy()),this.footerDropDown&&this.footerDropDown.destroy(),this.headerDropDown&&this.headerDropDown.destroy(),this._editor&&this._editor.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),this.toolbar.off(W),v&&(this._mediaQuery.removeListener(this._mediaQueryHandler),this._mediaQuery=null),e(window).off("resize"+W,this._resizeHandler),e(this.wrapper).off(W),this.toolbar=null,this.footer=null},setOptions:function(t){var i,n=m.deepExtend({},this.options,t),s=this._events;t.views||(i=this.view().name,n.views=e.map(this.options.views,function(e){var t=T(e),n=t?"string"!=typeof e.type?e.title:e.type:e;return i===n?t?e.selected=!0:e={type:n,selected:!0}:t&&(e.selected=!1),e})),t.dataSource||(n.dataSource=this.dataSource),t.dependencies||(n.dependencies=this.dependencies),t.resources||(n.resources=this.resources),t.assignments||(n.assignments=this.assignments),this.destroy(),this.element.empty(),this.options=null,this.init(this.element,n,s),A.fn._setEvents.call(this,n)},_attachEvents:function(){this._resizeHandler=E(this.resize,this,!1),e(window).on("resize"+W,this._resizeHandler)},_wrapper:function(){var e=f.styles,t=[e.icon,e.resizeHandle].join(" "),i=this.options,n=i.height,s=i.width;this.wrapper=this.element.addClass(e.wrapper).append("<div class='"+e.listWrapper+"'><div></div></div>").append("<div class='"+e.splitBarWrapper+"'><div class='"+t+"'></div></div>").append("<div class='"+e.timelineWrapper+"'><div></div></div>"),this.wrapper.find(V+e.list).width(i.listWidth),n&&this.wrapper.height(n),s&&this.wrapper.width(s),i.rowHeight&&this.wrapper.addClass(e.rowHeight)},_toolbar:function(){var t,i,n,s=this,r=f.styles,a=V+r.toolbar.views+" > li",o=V+r.toolbar.pdfButton,u=V+r.buttonToggle,d=V+r.gridContent,l=e(V+r.list),c=e(V+r.timeline),h=r.hovered,p=this.options.toolbar,g=e("<div class='"+r.toolbar.actions+"'>"),b=function(e){e.matches?l.css({display:"none","max-width":0}):(l.css({display:"inline-block",width:"30%","max-width":"none"}),c.css("display","inline-block"),s.refresh(),c.find(d).scrollTop(s.scrollTop)),s._resize()};B(p)||(p=typeof p===U?p:this._actions(p),p=E(m.template(p),this)),n=e(X({styles:r.toolbar})),i=e($({ns:m.ns,views:this.timeline.views,styles:r.toolbar})),g.append(p({})),t=e("<div class='"+r.toolbar.headerWrapper+"'>").append(n).append(i).append(g),i.find("li").length>1&&i.prepend(Z({styles:r.toolbar})),this.wrapper.prepend(t),this.toolbar=t,v&&(this._mediaQueryHandler=E(b,this),this._mediaQuery=window.matchMedia("(max-width: 480px)"),this._mediaQuery.addListener(this._mediaQueryHandler)),t.on(M+W,a,function(t){var n,a,o;t.preventDefault(),n=s.list,a=e(this).attr(m.attr("name")),o=i.find(V+r.toolbar.currentView),o.is(":visible")&&o.parent().toggleClass(r.toolbar.expanded),n.editable&&n.editable.trigger("validate")||s.trigger("navigate",{view:a})||s.view(a)}).on(M+W,o,function(e){e.preventDefault(),s.saveAsPDF()}).on(M+W,u,function(e){e.preventDefault(),l.is(":visible")?(l.css({display:"none",width:"0"}),c.css({display:"inline-block",width:"100%"}),s.refresh(),c.find(d).scrollTop(s.scrollTop)):(c.css({display:"none",width:0}),l.css({display:"inline-block",width:"100%","max-width":"none"}).find(d).scrollTop(s.scrollTop)),s._resize()}),this.wrapper.find(V+r.toolbar.toolbar+" li").hover(function(){e(this).addClass(h)},function(){e(this).removeClass(h)})},_actions:function(){var e,t,i=this.options,n=i.editable,s=i.toolbar,r="";if(!F(s)){if(!n||n.create===!1)return r;s=["append"]}for(e=0,t=s.length;e<t;e++)r+=this._createButton(s[e]);return r},_footer:function(){var t,i,n,s,r,a=this.options.editable;a&&a.create!==!1&&(t=f.styles.toolbar,i=this.options.messages.actions,n=e(m.template(Y)(S(!0,{styles:t},o.append,{text:i.append}))),s=e("<div class='"+t.actions+"'>").append(n),r=e("<div class='"+t.footerWrapper+"'>").append(s),this.wrapper.append(r),this.footer=r)},_createButton:function(e){var t=e.template||Y,i=this.options.messages.actions,n=typeof e===U?e:e.name||e.text,s=o[n]?o[n].className:"k-gantt-"+(n||"").replace(/\s/g,""),r={iconClass:"",action:"",text:n,className:s,styles:f.styles.toolbar};if(!(n||T(e)&&e.template))throw Error("Custom commands should have name specified");return r=S(!0,r,o[n],{text:i[n]}),T(e)&&(e.className&&C(r.className,e.className.split(" "))<0&&(e.className+=" "+r.className),r=S(!0,r,e)),m.template(t)(r)},_adjustDimensions:function(){var e=this.element,t=f.styles,i=V+t.list,n=V+t.timeline,s=V+t.splitBar,r=H(this.toolbar),a=this.footer?H(this.footer):0,o=e.height(),u=e.width(),d=R(e.find(s)),l=R(e.find(i));e.children([i,n,s].join(",")).height(o-(r+a)).end().children(n).width(u-(d+l)),u<l+d&&e.find(i).width(u-d)},_scrollTo:function(e){var t,n,s=this.timeline.view(),r=this.list,a=m.attr("uid"),o="string"==typeof e?e:e.closest("tr"+i()).attr(a),u=function(){0!==n.length&&t()};s.content.is(":visible")?(n=s.content.find(i(o)),t=function(){s._scrollTo(n)}):(n=r.content.find(i(o)),t=function(){n.get(0).scrollIntoView()}),u()},_dropDowns:function(){var e=this,t=V+f.styles.toolbar.actions,i=this.options.messages.actions,n=this.timeline,s=this.options.editable,r=function(t){var i,s=t.type,r=e.dataSource,a=r._createNewModel(),o=e.dataItem(e.select()),u=r.taskParent(o),d=n.view()._timeSlots()[0],l="add"===s?o:u,c=e.list.editable;c&&c.trigger("validate")||(a.set("title","New task"),l?(a.set("parentId",l.get("id")),a.set("start",l.get("start")),a.set("end",l.get("end"))):(a.set("start",d.start),a.set("end",d.end)),"add"!==s&&(i=o.get("orderId"),i="insert-before"===s?i:i+1),e._createTask(a,i))};s&&s.create!==!1&&(this.footerDropDown=new se(this.footer.children(t).eq(0),{messages:{actions:i},direction:"up",animation:{open:{effects:"slideIn:up"}},navigatable:e.options.navigatable}),this.headerDropDown=new se(this.toolbar.children(t).eq(0),{messages:{actions:i},navigatable:e.options.navigatable}),this.footerDropDown.bind("command",r),this.headerDropDown.bind("command",r))},_list:function(){var e,t,i=this,n=i.options.navigatable,s=f.styles,a=this.wrapper.find(V+s.list),o=a.find("> div"),u=this.wrapper.find(V+s.toolbar.actions+" > button"),d={columns:this.options.columns||[],dataSource:this.dataSource,selectable:this.options.selectable,editable:this.options.editable,resizable:this.options.resizable,columnResizeHandleWidth:this.options.columnResizeHandleWidth,listWidth:R(a),resourcesField:this.resources.field,rowHeight:this.options.rowHeight},l=d.columns,c=function(){n&&(i._current(i._cachedCurrent),r(i.list.content.find("table"),!0)),delete i._cachedCurrent};for(t=0;t<l.length;t++)e=l[t],e.field===this.resources.field&&"function"!=typeof e.editor&&(e.editor=E(this._createResourceEditor,this));this.list=new m.ui.GanttList(o,d),this.list.bind("render",function(){i._navigatable()},!0).bind("edit",function(e){i._cachedCurrent=e.cell,i.trigger("edit",{task:e.model,container:e.cell})&&e.preventDefault()}).bind("cancel",function(e){i.trigger("cancel",{task:e.model,container:e.cell})&&e.preventDefault(),c()}).bind("update",function(e){i._updateTask(e.task,e.updateInfo),c()}).bind("change",function(){i.trigger("change");var e=i.list.select();e.length?(u.removeAttr("data-action","add"),i.timeline.select("[data-uid='"+e.attr("data-uid")+"']")):(u.attr("data-action","add"),i.timeline.clearSelection())}).bind("columnResize",function(e){i.trigger("columnResize",{column:e.column,oldWidth:e.oldWidth,newWidth:e.newWidth})})},_timeline:function(){var e=this,i=f.styles,s=n(S(!0,{resourcesField:this.resources.field},this.options)),r=this.wrapper.find(V+i.timeline+" > div"),a=V+i.toolbar.currentView+" > "+V+i.toolbar.link;this.timeline=new m.ui.GanttTimeline(r,s),this.timeline.bind("navigate",function(t){var n=t.view.replace(/\./g,"\\.").toLowerCase(),s=e.toolbar.find(V+i.toolbar.views+" > li").removeClass(i.selected).end().find(V+i.toolbar.viewButton+"-"+n).addClass(i.selected).find(V+i.toolbar.link).text();e.toolbar.find(a).text(s),e.refresh()}).bind("moveStart",function(i){var n=e.list.editable;return n&&n.trigger("validate")?(i.preventDefault(),t):(e.trigger("moveStart",{task:i.task})&&i.preventDefault(),t)}).bind("move",function(t){var i=t.task,n=t.start,s=new Date(n.getTime()+i.duration());e.trigger("move",{task:i,start:n,end:s})&&t.preventDefault()}).bind("moveEnd",function(t){var i=t.task,n=t.start,s=new Date(n.getTime()+i.duration());e.trigger("moveEnd",{task:i,start:n,end:s})||e._updateTask(e.dataSource.getByUid(i.uid),{start:n,end:s})}).bind("resizeStart",function(i){var n=e.list.editable;return n&&n.trigger("validate")?(i.preventDefault(),t):(e.trigger("resizeStart",{task:i.task})&&i.preventDefault(),t)}).bind("resize",function(t){e.trigger("resize",{task:t.task,start:t.start,end:t.end})&&t.preventDefault()}).bind("resizeEnd",function(t){var i=t.task,n={};t.resizeStart?n.start=t.start:n.end=t.end,e.trigger("resizeEnd",{task:i,start:t.start,end:t.end})||e._updateTask(e.dataSource.getByUid(i.uid),n)}).bind("percentResizeStart",function(t){var i=e.list.editable;i&&i.trigger("validate")&&t.preventDefault()}).bind("percentResizeEnd",function(t){e._updateTask(e.dataSource.getByUid(t.task.uid),{percentComplete:t.percentComplete})}).bind("dependencyDragStart",function(t){var i=e.list.editable;i&&i.trigger("validate")&&t.preventDefault()}).bind("dependencyDragEnd",function(t){var i=e.dependencies._createNewModel({type:t.type,predecessorId:t.predecessor.id,successorId:t.successor.id});e._createDependency(i)}).bind("select",function(t){var i=e.list.editable;i&&i.trigger("validate"),e.select("[data-uid='"+t.uid+"']")}).bind("editTask",function(t){var i=e.list.editable;i&&i.trigger("validate")||e.editTask(t.uid)}).bind("clear",function(){e.clearSelection()}).bind("removeTask",function(t){var i=e.list.editable;i&&i.trigger("validate")||e.removeTask(e.dataSource.getByUid(t.uid))}).bind("removeDependency",function(t){var i=e.list.editable;i&&i.trigger("validate")||e.removeDependency(e.dependencies.getByUid(t.uid))})},_dataSource:function(){var e=this.options,t=e.dataSource;t=F(t)?{data:t}:t,this.dataSource&&this._refreshHandler?this.dataSource.unbind("change",this._refreshHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler):(this._refreshHandler=E(this.refresh,this),this._progressHandler=E(this._requestStart,this),this._errorHandler=E(this._error,this)),this.dataSource=m.data.GanttDataSource.create(t).bind("change",this._refreshHandler).bind("progress",this._progressHandler).bind("error",this._errorHandler)},_dependencies:function(){var e=this.options.dependencies||{},t=F(e)?{data:e}:e;this.dependencies&&this._dependencyRefreshHandler?this.dependencies.unbind("change",this._dependencyRefreshHandler).unbind("error",this._dependencyErrorHandler):(this._dependencyRefreshHandler=E(this.refreshDependencies,this),this._dependencyErrorHandler=E(this._error,this)),this.dependencies=m.data.GanttDependencyDataSource.create(t).bind("change",this._dependencyRefreshHandler).bind("error",this._dependencyErrorHandler)},_resources:function(){var e=this.options.resources,t=e.dataSource||{};this.resources={field:"resources",dataTextField:"name",dataColorField:"color",dataFormatField:"format"},S(this.resources,e),this.resources.dataSource=m.data.DataSource.create(t)},_assignments:function(){var e=this.options.assignments,t=e.dataSource||{};this.assignments?this.assignments.dataSource.unbind("change",this._assignmentsRefreshHandler):this._assignmentsRefreshHandler=E(this.refresh,this),this.assignments={dataTaskIdField:"taskId",dataResourceIdField:"resourceId",dataValueField:"value"},S(this.assignments,e),this.assignments.dataSource=m.data.DataSource.create(t),this.assignments.dataSource.bind("change",this._assignmentsRefreshHandler)},_createEditor:function(){var e=this,i=this._editor=new h(this.wrapper,S({},this.options,{target:this,resources:{field:this.resources.field,editor:E(this._createResourceEditor,this)},createButton:E(this._createPopupButton,this)}));i.bind("cancel",function(i){var n=e.dataSource.getByUid(i.model.uid);return e.trigger("cancel",{container:i.container,task:n})?(i.preventDefault(),t):(e.cancelTask(),t)}).bind("edit",function(t){var i=e.dataSource.getByUid(t.model.uid);e.trigger("edit",{container:t.container,task:i})&&t.preventDefault()}).bind("save",function(t){var i=e.dataSource.getByUid(t.model.uid);e.saveTask(i,t.updateInfo)}).bind("remove",function(t){e.removeTask(t.model.uid)}).bind("close",e._onDialogClose)},_onDialogClose:function(){},_createResourceEditor:function(e,t){var i=this,n=t instanceof k?t:t.model,s=n.get("id"),r=this.options.messages,a=i.resources.field,o=this._resourceEditor=new p(e,{resourcesField:a,data:this._wrapResourceData(s),model:n,messages:S({},r.editor),buttons:[{name:"update",text:r.save,className:f.styles.primary},{name:"cancel",text:r.cancel}],createButton:E(this._createPopupButton,this),save:function(e){i._updateAssignments(e.model.get("id"),e.model.get(a))}});o.open()},_createPopupButton:function(e){var t=e.name||e.text,i={className:f.styles.popup.button+" k-gantt-"+(t||"").replace(/\s/g,""),text:t,attr:""};if(!(t||T(e)&&e.template))throw Error("Custom commands should have name specified");return T(e)&&(e.className&&(e.className+=" "+i.className),i=S(!0,i,e)),m.template(J)(i)},view:function(e){return this.timeline.view(e)},range:function(e){var t=this.dataSource,i=this.view(),n=this.timeline;return e&&(i.options.range={start:e.start,end:e.end},n._render(t.taskTree()),n._renderDependencies(this.dependencies.view())),{start:i.start,end:i.end}},date:function(e){var t=this.view();return e&&(t.options.date=e,t._scrollToDate(e)),t.options.date},dataItem:function(e){var t,i;return e?(t=this.list,i=t.content.find(e),t._modelFromElement(i)):null},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.list._setDataSource(this.dataSource),this.options.autoBind&&e.fetch()},setDependenciesDataSource:function(e){this.options.dependencies=e,this._dependencies(),this.options.autoBind&&e.fetch()},items:function(){return this.wrapper.children(".k-task")},_updateAssignments:function(e,t){for(var i,n,s,r,a,o,u,d=this.assignments.dataSource,l=this.assignments.dataTaskIdField,c=this.assignments.dataResourceIdField,h=!1,p=new D(d.view()).filter({field:l,operator:"eq",value:e}).toArray();p.length;){for(i=p[0],r=0,a=t.length;r<a;r++)if(n=t[r],i.get(c)===n.get("id")){s=t[r].get("value"),this._updateAssignment(i,s),t.splice(r,1),h=!0;break}h||this._removeAssignment(i),h=!1,p.shift()}for(o=0,u=t.length;o<u;o++)n=t[o],this._createAssignment(n,e);d.sync()},cancelTask:function(){var e=this._editor,t=e.container;t&&e.close()},editTask:function(e){var t,i="string"==typeof e?this.dataSource.getByUid(e):e;i&&(t=this.dataSource._createNewModel(i.toJSON()),t.uid=i.uid,this.cancelTask(),this._editTask(t))},_editTask:function(e){this._editor.editTask(e)},saveTask:function(e,t){var i=this._editor,n=i.container,s=i.editable;n&&s&&s.end()&&this._updateTask(e,t)},_updateTask:function(e,t){var i=this.resources.field;this.trigger("save",{task:e,values:t})||(this._preventRefresh=!0,this.dataSource.update(e,t),t[i]&&this._updateAssignments(e.get("id"),t[i]),this._syncDataSource())},_updateAssignment:function(e,t){var i=this.assignments.dataValueField;e.set(i,t)},removeTask:function(e){var t=this,i="string"==typeof e?this.dataSource.getByUid(e):e;i&&this._taskConfirm(function(e){e||t._removeTask(i)},i)},_createTask:function(e,i){if(!this.trigger("add",{task:e,dependency:null})){var n=this.dataSource;this._preventRefresh=!0,i===t?n.add(e):n.insert(i,e),this._scrollToUid=e.uid,this._syncDataSource()}},_createDependency:function(e){this.trigger("add",{task:null,dependency:e})||(this._preventDependencyRefresh=!0,this.dependencies.add(e),this._preventDependencyRefresh=!1,this.dependencies.sync())},_createAssignment:function(e,t){var i=this.assignments,n=i.dataSource,s=i.dataTaskIdField,r=i.dataResourceIdField,a=i.dataValueField,o=n._createNewModel();o[s]=t,o[r]=e.get("id"),o[a]=e.get("value"),n.add(o)},removeDependency:function(e){var t=this,i="string"==typeof e?this.dependencies.getByUid(e):e;i&&this._dependencyConfirm(function(e){e||t._removeDependency(i)},i)},_removeTaskDependencies:function(e,t){this._preventDependencyRefresh=!0;for(var i=0,n=t.length;i<n;i++)this.dependencies.remove(t[i]);this._preventDependencyRefresh=!1,this.dependencies.sync()},_removeTaskAssignments:function(e){var t,i,n=this.assignments.dataSource,s=n.view(),r={field:this.assignments.dataTaskIdField,operator:"eq",value:e.get("id")};for(s=new D(s).filter(r).toArray(),this._preventRefresh=!0,t=0,i=s.length;t<i;t++)n.remove(s[t]);this._preventRefresh=!1,n.sync()},_removeTask:function(e){var t=this.dependencies.dependencies(e.id);this.trigger("remove",{task:e,dependencies:t})||(this._removeTaskDependencies(e,t),this._removeTaskAssignments(e),this._preventRefresh=!0,this.dataSource.remove(e)&&this._syncDataSource(),this._preventRefresh=!1)},_removeDependency:function(e){this.trigger("remove",{task:null,dependencies:[e]})||this.dependencies.remove(e)&&this.dependencies.sync()},_removeAssignment:function(e){this.assignments.dataSource.remove(e)},_taskConfirm:function(e,t){var i=this.options.messages;this._confirm(e,{model:t,text:i.deleteTaskConfirmation,title:i.deleteTaskWindowTitle})},_dependencyConfirm:function(e,t){var i=this.options.messages;this._confirm(e,{model:t,text:i.deleteDependencyConfirmation,title:i.deleteDependencyWindowTitle})},_confirm:function(e,t){var i,n,s=this.options.editable;s===!0||s.confirmation!==!1?(i=this.options.messages,n=[{name:"delete",text:i.destroy,className:f.styles.primary,click:function(){e()}},{name:"cancel",text:i.cancel,click:function(){e(!0)}}],this.showDialog(S(!0,{},t,{buttons:n}))):e()},showDialog:function(e){this._editor.showDialog(e)},refresh:function(){var e,t,n,s,r,a;this._preventRefresh||this.list.editable||(this._progress(!1),e=this.dataSource,t=e.taskTree(),n=this._scrollToUid,a=-1,this.current&&(r=this.current.closest("tr").attr(m.attr("uid")),a=this.current.index()),this.trigger("dataBinding")||(0!==this.resources.dataSource.data().length&&this._assignResources(t),this._editor&&this._editor.close(),this.clearSelection(),this.list._render(t),this.timeline._render(t),this.timeline._renderDependencies(this.dependencies.view()),n&&(this._scrollTo(n),this.select(i(n))),(n||r)&&a>=0&&(s=this.list.content.find("tr"+i(n||r)+" > td:eq("+a+")"),this._current(s)),this._scrollToUid=null,this.trigger("dataBound")))},refreshDependencies:function(){this._preventDependencyRefresh||this.trigger("dataBinding")||(this.timeline._renderDependencies(this.dependencies.view()),this.trigger("dataBound"))},_assignResources:function(e){var t,i,n=this.resources,s=this.assignments,r=function(){var e=s.dataSource.view(),t={field:s.dataTaskIdField};return e=new D(e).group(t).toArray()},a=r(),o=function(e,t){var i,s,r=e.get("id");for(m.setter(n.field)(e,new w([])),i=0,s=a.length;i<s;i++)a[i].value===r&&t(e,a[i].items)},u=function(e,t){var i,r,a,o,u,d,l,c;for(i=0,r=t.length;i<r;i++)a=t[i],o=n.dataSource.get(a.get(s.dataResourceIdField)),u=a.get(s.dataValueField),d=a.get(s.dataResourceIdField),l=o.get(n.dataFormatField)||P,c=m.toString(u,l),e[n.field].push(new k({id:d,name:o.get(n.dataTextField),color:o.get(n.dataColorField),value:u,formatedValue:c}))};for(t=0,i=e.length;t<i;t++)o(e[t],u)},_wrapResourceData:function(e){var t,i,n,s=this,r=[],a=this.resources.dataSource.view(),o=this.assignments.dataSource.view(),u=new D(o).filter({field:s.assignments.dataTaskIdField,operator:"eq",value:e}).toArray(),d=function(e){var t=null;return new D(u).filter({field:s.assignments.dataResourceIdField,operator:"eq",value:e}).select(function(e){t+=e.get(s.assignments.dataValueField)}),t};for(i=0,n=a.length;i<n;i++)t=a[i],r.push({id:t.get("id"),name:t.get(s.resources.dataTextField),format:t.get(s.resources.dataFormatField)||P,value:d(t.id)});return r},_syncDataSource:function(){this._preventRefresh=!1,this._requestStart(),this.dataSource.sync()},_requestStart:function(){this._progress(!0)},_error:function(){this._progress(!1)},_progress:function(e){m.ui.progress(this.element,e)},_resizable:function(){var t,i,n,s=this,r=this.wrapper,a=f.styles,o=V+a.gridContent,u=r.find(V+a.list),d=r.find(V+a.timeline);this._resizeDraggable=r.find(V+a.splitBar).height(u.height()).hover(function(){e(this).addClass(a.splitBarHover)},function(){e(this).removeClass(a.splitBarHover)}).end().kendoResizable({orientation:"horizontal",handle:V+a.splitBar,start:function(){t=u.width(),i=d.width(),n=d.find(o).scrollLeft()},resize:function(e){var a=e.x.initialDelta;m.support.isRtl(r)&&(a*=-1),t+a<0||i-a<0||(u.width(t+a),d.width(i-a),d.find(o).scrollLeft(n+a),s.timeline.view()._renderCurrentTime())}}).data("kendoResizable")},_scrollable:function(){var t=this,i=f.styles,n=V+i.gridContent,s=V+i.gridHeaderWrap,r=this.timeline.element.find(s),a=this.timeline.element.find(n),o=this.list.element.find(s),u=this.list.element.find(n);b&&u.css("overflow-y","auto"),a.on("scroll",function(){t.scrollTop=this.scrollTop,r.scrollLeft(this.scrollLeft),u.scrollTop(this.scrollTop)}),u.on("scroll",function(){o.scrollLeft(this.scrollLeft)}).on("DOMMouseScroll"+W+" mousewheel"+W,function(t){var i=a.scrollTop(),n=m.wheelDeltaY(t);n&&(t.preventDefault(),e(t.currentTarget).one("wheel"+W,!1),a.scrollTop(i+-n))})},_navigatable:function(){var n,s=this,a=this.options.navigatable,o=this.options.editable,u=this.list.header.find("table"),d=this.list.content.find("table"),l=f.styles,c=m.support.isRtl(this.wrapper),h=this.timeline.element.find(V+l.gridContent),p=u.add(d),v=i(),g={collapse:!1,expand:!0},b=function(e){var t=s.timeline.view()._timeSlots()[0].offsetWidth;h.scrollLeft(h.scrollLeft()+(e?-t:t))},_=function(e){var t=s.current.parent("tr"+i()),n=s.current.index(),a=t[e]();0!==s.select().length&&s.clearSelection(),0!==a.length?(s._current(a.children("td:eq("+n+")")),s._scrollTo(s.current)):s.current.is("td")&&"prev"==e?r(u):s.current.is("th")&&"next"==e&&r(d)},A=function(e){var t=s.current[e]();0!==t.length&&(s._current(t),n=s.current.index())},y=function(e){var t=s.dataItem(s.current);t.summary&&t.expanded!==e&&t.set("expanded",e)},k=function(){var e,t,i=s.options.editable;i&&i.destroy!==!1&&!s.list.editable&&(e=s.select(),t=m.attr("uid"),e.length&&s.removeTask(e.attr(t)))};return e(this.wrapper).on("mousedown"+W,"tr"+v+", div"+v+":not("+V+l.line+")",function(t){var n,u=e(t.currentTarget),d=e(t.target).is(":button,a,:input,a>.k-icon,textarea,span.k-icon,span.k-link,.k-input,.k-multiselect-wrap");t.ctrlKey||(a&&(n=u.is("tr")?e(t.target).closest("td"):s.list.content.find("tr"+i(u.attr(m.attr("uid")))+" > td:first"),s._current(n)),!a&&!o||d||(s._focusTimeout=setTimeout(function(){r(s.list.content.find("table"),!0)},2)))}),a!==!0?(d.on("keydown"+W,function(e){e.keyCode==z.DELETE&&k()}),t):(p.on("focus"+W,function(){var t=this===d.get(0)?"td":"th",i=s.select(),r=s.current||e(i.length?i:this).find(t+":eq("+(n||0)+")");s._current(r)}).on("blur"+W,function(){s._current(),this==u&&e(this).attr(N,-1)}).on("keydown"+W,function(t){var i,n=t.keyCode;if(s.current)switch(i=s.current.is("td"),n){case z.RIGHT:t.preventDefault(),t.altKey?b():t.ctrlKey?y(c?g.collapse:g.expand):A(c?"prev":"next");break;case z.LEFT:t.preventDefault(),t.altKey?b(!0):t.ctrlKey?y(c?g.expand:g.collapse):A(c?"next":"prev");break;case z.UP:t.preventDefault(),_("prev");break;case z.DOWN:t.preventDefault(),_("next");break;case z.SPACEBAR:t.preventDefault(),i&&s.select(s.current.closest("tr"));break;case z.ENTER:t.preventDefault(),i?s.options.editable&&s.options.editable.update!==!1&&(s._cachedCurrent=s.current,s.list._startEditHandler(s.current),e(this).one("keyup",function(e){e.stopPropagation()})):s.current.children("a.k-link").click();break;case z.ESC:t.stopPropagation();break;case z.DELETE:i&&k();break;default:n>=49&&n<=57&&s.view(s.timeline._viewByIndex(n-49))}}),t)},_current:function(t){var i,n=f.styles;this.current&&this.current.length&&this.current.removeClass(n.focused).removeAttr("id"),t&&t.length?(this.current=t.addClass(n.focused).attr("id",j),i=e(m._activeElement()),i.is("table")&&this.wrapper.find(i).length>0&&i.removeAttr(O).attr(O,j)):this.current=null},_dataBind:function(){var t,i=this;i.options.autoBind&&(this._preventRefresh=!0,this._preventDependencyRefresh=!0,t=e.map([this.dataSource,this.dependencies,this.resources.dataSource,this.assignments.dataSource],function(e){return e.fetch()}),e.when.apply(null,t).done(function(){i._preventRefresh=!1,i._preventDependencyRefresh=!1,i.refresh()}))},_resize:function(){this._adjustDimensions(),this.timeline.view()._adjustHeight(),this.timeline.view()._renderCurrentTime(),this.list._adjustHeight()}}),m.PDFMixin&&(m.PDFMixin.extend(f.fn),f.fn._drawPDF=function(){var e=f.styles,t="."+e.list,i=this.wrapper.find(t).width(),n=this.wrapper.clone();return n.find(t).css("width",i),this._drawPDFShadow({content:n},{avoidLinks:this.options.pdf.avoidLinks})}),m.ui.plugin(f),S(!0,f,{styles:ne})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.gantt.min.js.map
