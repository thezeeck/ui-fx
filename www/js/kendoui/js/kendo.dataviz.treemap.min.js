/** 
 * Kendo UI v2016.3.1216 (http://www.telerik.com/kendo-ui)                                                                                                                                              
 * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(t,define){define("util/main.min",["kendo.core.min"],t)}(function(){return function(){function t(t){return typeof t!==j}function e(t,e){var i=u(e);return H.round(t*i)/i}function u(t){return t?H.pow(10,t):1}function i(t,e,u){return H.max(H.min(t,u),e)}function n(t){return t*N}function r(t){return t/N}function o(t){return"number"==typeof t&&!isNaN(t)}function a(e,u){return t(e)?e:u}function s(t){return t*t}function h(t){var e,u=[];for(e in t)u.push(e+t[e]);return u.sort().join("")}function l(t){var e,u=2166136261;for(e=0;e<t.length;++e)u+=(u<<1)+(u<<4)+(u<<7)+(u<<8)+(u<<24),u^=t.charCodeAt(e);return u>>>0}function d(t){return l(h(t))}function c(t){var e,u=t.length,i=R,n=O;for(e=0;e<u;e++)n=H.max(n,t[e]),i=H.min(i,t[e]);return{min:i,max:n}}function f(t){return c(t).min}function A(t){return c(t).max}function p(t){return F(t).min}function m(t){return F(t).max}function F(t){var e,u,i,n=R,r=O;for(e=0,u=t.length;e<u;e++)i=t[e],null!==i&&isFinite(i)&&(n=H.min(n,i),r=H.max(r,i));return{min:n===R?void 0:n,max:r===O?void 0:r}}function g(t){if(t)return t[t.length-1]}function v(t,e){return t.push.apply(t,e),t}function C(t){return L.template(t,{useWithBlock:!1,paramName:"d"})}function B(e,u){return t(u)&&null!==u?" "+e+"='"+u+"' ":""}function _(t){var e,u="";for(e=0;e<t.length;e++)u+=B(t[e][0],t[e][1]);return u}function D(e){var u,i,n="";for(u=0;u<e.length;u++)i=e[u][1],t(i)&&(n+=e[u][0]+":"+i+";");if(""!==n)return n}function E(t){return"string"!=typeof t&&(t+="px"),t}function w(t){var e,u,i=[];if(t)for(e=L.toHyphens(t).split("-"),u=0;u<e.length;u++)i.push("k-pos-"+e[u]);return i.join(" ")}function y(e){return""===e||null===e||"none"===e||"transparent"===e||!t(e)}function x(t){for(var e={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"},u=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],i="";t>0;)t<u[0]?u.shift():(i+=e[u[0]],t-=u[0]);return i}function b(t){var e,u,i,n,r;for(t=t.toLowerCase(),e={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3},u=0,i=0,n=0;n<t.length;++n){if(r=e[t.charAt(n)],!r)return null;u+=r,r>i&&(u-=2*i),i=r}return u}function k(t){var e=Object.create(null);return function(){var u,i="";for(u=arguments.length;--u>=0;)i+=":"+arguments[u];return i in e?e[i]:e[i]=t.apply(this,arguments)}}function S(t){for(var e,u,i=[],n=0,r=t.length;n<r;)e=t.charCodeAt(n++),e>=55296&&e<=56319&&n<r?(u=t.charCodeAt(n++),56320==(64512&u)?i.push(((1023&e)<<10)+(1023&u)+65536):(i.push(e),n--)):i.push(e);return i}function z(t){return t.map(function(t){var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t)}).join("")}function I(t,e){function u(t,u){for(var i=[],n=0,r=0,o=0;n<t.length&&r<u.length;)e(t[n],u[r])<=0?i[o++]=t[n++]:i[o++]=u[r++];return n<t.length&&i.push.apply(i,t.slice(n)),r<u.length&&i.push.apply(i,u.slice(r)),i}return t.length<2?t.slice():function i(t){var e,n,r;return t.length<=1?t:(e=Math.floor(t.length/2),n=t.slice(0,e),r=t.slice(e),n=i(n),r=i(r),u(n,r))}(t)}function M(t){return T.test(t)}var T,H=Math,L=window.kendo,U=L.deepExtend,N=H.PI/180,R=Number.MAX_VALUE,O=-Number.MAX_VALUE,j="undefined",V=Date.now;V||(V=function(){return(new Date).getTime()}),U(L,{util:{MAX_NUM:R,MIN_NUM:O,append:v,arrayLimits:c,arrayMin:f,arrayMax:A,defined:t,deg:r,hashKey:l,hashObject:d,isNumber:o,isTransparent:y,last:g,limitValue:i,now:V,objectKey:h,round:e,rad:n,renderAttr:B,renderAllAttr:_,renderPos:w,renderSize:E,renderStyle:D,renderTemplate:C,sparseArrayLimits:F,sparseArrayMin:p,sparseArrayMax:m,sqr:s,valueOrDefault:a,romanToArabic:b,arabicToRoman:x,memoize:k,ucs2encode:z,ucs2decode:S,mergeSort:I,isUnicodeLetter:M}}),L.drawing.util=L.util,L.dataviz.util=L.util,T=RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]")}(),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,u){(u||e)()}),function(t,define){define("util/text-metrics.min",["kendo.core.min","util/main.min"],t)}(function(){!function(t){function e(){return{width:0,height:0,baseline:0}}function u(t,e,u){return d.current.measure(t,e,u)}function i(t,e){var u=[];if(t.length>0&&document.fonts){try{u=t.map(function(t){return document.fonts.load(t)})}catch(i){r.logToConsole(i)}Promise.all(u).then(e,e)}else e()}var n=document,r=window.kendo,o=r.Class,a=r.util,s=a.defined,h=o.extend({init:function(t){this._size=t,this._length=0,this._map={}},put:function(t,e){var u=this,i=u._map,n={key:t,value:e};i[t]=n,u._head?(u._tail.newer=n,n.older=u._tail,u._tail=n):u._head=u._tail=n,u._length>=u._size?(i[u._head.key]=null,u._head=u._head.newer,u._head.older=null):u._length++},get:function(t){var e=this,u=e._map[t];if(u)return u===e._head&&u!==e._tail&&(e._head=u.newer,e._head.older=null),u!==e._tail&&(u.older&&(u.older.newer=u.newer,u.newer.older=u.older),u.older=e._tail,u.newer=null,e._tail.newer=u,e._tail=u),u.value}}),l=t("<div style='position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;' />")[0],d=o.extend({init:function(t){this._cache=new h(1e3),this._initOptions(t)},options:{baselineMarkerSize:1},measure:function(u,i,r){var o,h,d,c,f,A,p,m;if(!u)return e();if(o=a.objectKey(i),h=a.hashKey(u+o),d=this._cache.get(h),d)return d;c=e(),f=r?r:l,A=this._baselineMarker().cloneNode(!1);for(p in i)m=i[p],s(m)&&(f.style[p]=m);return t(f).text(u),f.appendChild(A),n.body.appendChild(f),(u+"").length&&(c.width=f.offsetWidth-this.options.baselineMarkerSize,c.height=f.offsetHeight,c.baseline=A.offsetTop+this.options.baselineMarkerSize),c.width>0&&c.height>0&&this._cache.put(h,c),f.parentNode.removeChild(f),c},_baselineMarker:function(){return t("<div class='k-baseline-marker' style='display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;' />")[0]}});d.current=new d,r.util.TextMetrics=d,r.util.LRUCache=h,r.util.loadFonts=i,r.util.measureText=u}(window.kendo.jQuery)},"function"==typeof define&&define.amd?define:function(t,e,u){(u||e)()}),function(t,define){define("util/base64.min",["util/main.min"],t)}(function(){return function(){function t(t){var u,i,n,o,a,s,h,l="",d=0;for(t=e(t);d<t.length;)u=t.charCodeAt(d++),i=t.charCodeAt(d++),n=t.charCodeAt(d++),o=u>>2,a=(3&u)<<4|i>>4,s=(15&i)<<2|n>>6,h=63&n,isNaN(i)?s=h=64:isNaN(n)&&(h=64),l=l+r.charAt(o)+r.charAt(a)+r.charAt(s)+r.charAt(h);return l}function e(t){var e,u,i="";for(e=0;e<t.length;e++)u=t.charCodeAt(e),u<128?i+=n(u):u<2048?(i+=n(192|u>>>6),i+=n(128|63&u)):u<65536&&(i+=n(224|u>>>12),i+=n(128|u>>>6&63),i+=n(128|63&u));return i}var u=window.kendo,i=u.deepExtend,n=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i(u.util,{encodeBase64:t,encodeUTF8:e})}(),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,u){(u||e)()}),function(t,define){define("mixins/observers.min",["kendo.core.min"],t)}(function(){return function(t){var e=Math,u=window.kendo,i=u.deepExtend,n=t.inArray,r={observers:function(){return this._observers=this._observers||[]},addObserver:function(t){return this._observers?this._observers.push(t):this._observers=[t],this},removeObserver:function(t){var e=this.observers(),u=n(t,e);return u!=-1&&e.splice(u,1),this},trigger:function(t,e){var u,i,n=this._observers;if(n&&!this._suspended)for(i=0;i<n.length;i++)u=n[i],u[t]&&u[t](e);return this},optionsChange:function(t){t=t||{},t.element=this,this.trigger("optionsChange",t)},geometryChange:function(){this.trigger("geometryChange",{element:this})},suspend:function(){return this._suspended=(this._suspended||0)+1,this},resume:function(){return this._suspended=e.max((this._suspended||0)-1,0),this},_observerField:function(t,e){this[t]&&this[t].removeObserver(this),this[t]=e,e.addObserver(this)}};i(u,{mixins:{ObserversMixin:r}})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,u){(u||e)()}),function(t,define){define("kendo.dataviz.treemap.min",["kendo.data.min","kendo.userevents.min","kendo.dataviz.themes.min"],t)}(function(){return function(t,e){function u(t,e){if(null===e)return e;var u=E(t,!0);return u(e)}function i(t){return typeof t!==M}function n(t,e,u){var i,n,s=a(t),h=a(e),l=d(t)-d(e)<0,c=[];for(c.push(t),i=0;i<u;i++)n={r:r(s.r,h.r,i,u,l),g:r(s.g,h.g,i,u,l),b:r(s.b,h.b,i,u,l)},c.push(o(n));return c.push(e),c}function r(t,e,u,i,n){var r,o=f.min(f.abs(t),f.abs(e)),a=f.max(f.abs(t),f.abs(e)),s=(a-o)/(i+1),h=s*(u+1);return r=n?o+h:a-h}function o(t){return"#"+s(t.r)+s(t.g)+s(t.b)}function a(t){t=t.replace("#","");var e=h(t);return{r:l(e.r),g:l(e.g),b:l(e.b)}}function s(t){var e=f.round(t).toString(16).toUpperCase();return 1===e.length&&(e="0"+e),e}function h(t){var e=t.length,u={};return 3===e?(u.r=t[0],u.g=t[1],u.b=t[2]):(u.r=t.substring(0,2),u.g=t.substring(2,4),u.b=t.substring(4,6)),u}function l(t){return parseInt(t.toString(16),16)}function d(t){var e=0;return t&&(t=a(t),e=f.sqrt(.241*t.r*t.r+.691*t.g*t.g+.068*t.b*t.b)),e}function c(t){var e=f.pow(10,4);return f.round(t*e)/e}var f=Math,A=t.proxy,p=t.isArray,m=window.kendo,F=m._outerHeight,g=m._outerWidth,v=m.Class,C=m.ui.Widget,B=m.template,_=m.deepExtend,D=m.data.HierarchicalDataSource,E=m.getter,w=m.dataviz,y=".kendoTreeMap",x="change",b="dataBound",k="itemCreated",S=Number.MAX_VALUE,z="mouseover"+y,I="mouseleave"+y,M="undefined",T=C.extend({init:function(e,u){m.destroy(e),t(e).empty(),C.fn.init.call(this,e,u),this.wrapper=this.element,this._initTheme(this.options),this.element.addClass("k-widget k-treemap"),this._setLayout(),this._originalOptions=_({},this.options),this._initDataSource(),this._attachEvents(),m.notify(this,w.ui)},options:{name:"TreeMap",theme:"default",autoBind:!0,textField:"text",valueField:"value",colorField:"color"},events:[b,k],_initTheme:function(t){var e=this,u=w.ui.themes||{},i=((t||{}).theme||"").toLowerCase(),n=(u[i]||{}).treeMap;e.options=_({},n,t)},_attachEvents:function(){this.element.on(z,A(this._mouseover,this)).on(I,A(this._mouseleave,this)),this._resizeHandler=A(this.resize,this,!1),m.onResize(this._resizeHandler)},_setLayout:function(){"horizontal"===this.options.type?(this._layout=new U((!1)),this._view=new N(this,this.options)):"vertical"===this.options.type?(this._layout=new U((!0)),this._view=new N(this,this.options)):(this._layout=new H,this._view=new L(this,this.options))},_initDataSource:function(){var t=this,e=t.options,u=e.dataSource;t._dataChangeHandler=A(t._onDataChange,t),t.dataSource=D.create(u).bind(x,t._dataChangeHandler),u&&t.options.autoBind&&t.dataSource.fetch()},setDataSource:function(t){var e=this;e.dataSource.unbind(x,e._dataChangeHandler),e.dataSource=t.bind(x,e._dataChangeHandler),t&&e.options.autoBind&&e.dataSource.fetch()},_onDataChange:function(t){var e,u,i,n,r=t.node,o=t.items,a=this.options;if(r){if(o.length){for(i=this._getByUid(r.uid),i.children=[],o=new m.data.Query(o)._sortForGrouping(a.valueField,"desc"),u=0;u<o.length;u++)e=o[u],i.children.push(this._wrapItem(e));n=this._view.htmlSize(i),this._layout.compute(i.children,i.coord,n),this._setColors(i.children),this._view.render(i)}}else this._cleanItems(),this.element.empty(),e=this._wrapItem(o[0]),this._layout.createRoot(e,g(this.element),F(this.element),"vertical"===this.options.type),this._view.createRoot(e),this._root=e,this._colorIdx=0;for(u=0;u<o.length;u++)o[u].load();r&&this.trigger(b,{node:r})},_cleanItems:function(){var t=this;t.angular("cleanup",function(){return{elements:t.element.find(".k-leaf div,.k-treemap-title,.k-treemap-title-vertical")}})},_setColors:function(t){var e,u,r,o,a=this.options.colors,s=this._colorIdx,h=a[s%a.length];for(p(h)&&(e=n(h[0],h[1],t.length)),r=!1,o=0;o<t.length;o++)u=t[o],i(u.color)||(u.color=e?e[o]:h),u.dataItem.hasChildren||(r=!0);r&&this._colorIdx++},_contentSize:function(t){this.view.renderHeight(t)},_wrapItem:function(t){var e={};return i(this.options.valueField)&&(e.value=u(this.options.valueField,t)),i(this.options.colorField)&&(e.color=u(this.options.colorField,t)),i(this.options.textField)&&(e.text=u(this.options.textField,t)),e.level=t.level(),e.dataItem=t,e},_getByUid:function(t){for(var e,u=[this._root];u.length;){if(e=u.pop(),e.dataItem.uid===t)return e;e.children&&(u=u.concat(e.children))}},dataItem:function(e){var u=t(e).attr(m.attr("uid")),i=this.dataSource;return i&&i.getByUid(u)},findByUid:function(t){return this.element.find(".k-treemap-tile["+m.attr("uid")+"='"+t+"']")},_mouseover:function(e){var u=t(e.target);u.hasClass("k-leaf")&&(this._removeActiveState(),u.removeClass("k-state-hover").addClass("k-state-hover"))},_removeActiveState:function(){this.element.find(".k-state-hover").removeClass("k-state-hover")},_mouseleave:function(){this._removeActiveState()},destroy:function(){C.fn.destroy.call(this),this.element.off(y),this.dataSource&&this.dataSource.unbind(x,this._dataChangeHandler),this._root=null,m.unbindResize(this._resizeHandler),m.destroy(this.element)},items:function(){return t()},getSize:function(){return m.dimensions(this.element)},_resize:function(){var t,e,u=this._root;u&&(t=this.element,e=t.children(),u.coord.width=g(t),u.coord.height=F(t),e.css({width:u.coord.width,height:u.coord.height}),this._resizeItems(u,e))},_resizeItems:function(t,e){var u,i,n,r;if(t.children&&t.children.length)for(u=e.children(".k-treemap-wrap").children(),this._layout.compute(t.children,t.coord,{text:this._view.titleSize(t,e)}),r=0;r<t.children.length;r++)i=t.children[r],n=u.filter("["+m.attr("uid")+"='"+i.dataItem.uid+"']"),this._view.setItemSize(i,n),this._resizeItems(i,n)},setOptions:function(t){var u=t.dataSource;t.dataSource=e,this._originalOptions=_(this._originalOptions,t),this.options=_({},this._originalOptions),this._setLayout(),this._initTheme(this.options),C.fn._setEvents.call(this,t),u&&this.setDataSource(D.create(u)),this.options.autoBind&&this.dataSource.fetch()}}),H=v.extend({createRoot:function(t,e,u){t.coord={width:e,height:u,top:0,left:0}},leaf:function(t){return!t.children},layoutChildren:function(t,e){var u,i,n,r,o=e.width*e.height,a=0,s=[];for(u=0;u<t.length;u++)s[u]=parseFloat(t[u].value),a+=s[u];for(u=0;u<s.length;u++)t[u].area=o*s[u]/a;i=this.layoutHorizontal()?e.height:e.width,n=[t[0]],r=t.slice(1),this.squarify(r,n,i,e)},squarify:function(t,e,u,i){this.computeDim(t,e,u,i)},computeDim:function(t,u,i,n){var r,o,a;return t.length+u.length==1?(r=1==t.length?t:u,this.layoutLast(r,i,n),e):(t.length>=2&&0===u.length&&(u=[t[0]],t=t.slice(1)),0===t.length?(u.length>0&&this.layoutRow(u,i,n),e):(o=t[0],this.worstAspectRatio(u,i)>=this.worstAspectRatio([o].concat(u),i)?this.computeDim(t.slice(1),u.concat([o]),i,n):(a=this.layoutRow(u,i,n),this.computeDim(t,[],a.dim,a)),e))},layoutLast:function(t,e,u){t[0].coord=u},layoutRow:function(t,e,u){return this.layoutHorizontal()?this.layoutV(t,e,u):this.layoutH(t,e,u)},orientation:"h",layoutVertical:function(){return"v"===this.orientation},layoutHorizontal:function(){return"h"===this.orientation},layoutChange:function(){this.orientation=this.layoutVertical()?"h":"v"},worstAspectRatio:function(t,e){var u,i,n,r,o;if(!t||0===t.length)return S;for(u=0,i=0,n=S,r=0;r<t.length;r++)o=t[r].area,u+=o,n=n<o?n:o,i=i>o?i:o;return f.max(e*e*i/(u*u),u*u/(e*e*n))},compute:function(t,e,u){if(e.width>=e.height&&this.layoutHorizontal()||this.layoutChange(),t&&t.length>0){var i={width:e.width,height:e.height-u.text,top:0,left:0};this.layoutChildren(t,i)}},layoutV:function(t,e,u){var i,n,r,o=this._totalArea(t),a=0;for(e=c(o/e),i=0;i<t.length;i++)n=c(t[i].area/e),t[i].coord={height:n,width:e,top:u.top+a,left:u.left},a+=n;return r={height:u.height,width:u.width-e,top:u.top,left:u.left+e},r.dim=f.min(r.width,r.height),r.dim!=r.height&&this.layoutChange(),r},layoutH:function(t,e,u){var i,n,r=this._totalArea(t),o=c(r/e),a=u.top,s=0;for(i=0;i<t.length;i++)t[i].coord={height:o,width:c(t[i].area/o),top:a,left:u.left+s},s+=t[i].coord.width;return n={height:u.height-o,width:u.width,top:u.top+o,left:u.left},n.dim=f.min(n.width,n.height),n.dim!=n.width&&this.layoutChange(),n},_totalArea:function(t){var e,u=0;for(e=0;e<t.length;e++)u+=t[e].area;return u}}),L=v.extend({init:function(e,u){this.options=_({},this.options,u),this.treeMap=e,this.element=t(e.element),this.offset=0},titleSize:function(t,e){var u=e.children(".k-treemap-title");return u.height()},htmlSize:function(t){var e,u,i=this._getByUid(t.dataItem.uid),n={text:0};return t.children&&(this._clean(i),e=this._getText(t),e&&(u=this._createTitle(t),i.append(u),this._compile(u,t.dataItem),n.text=u.height()),i.append(this._createWrap()),this.offset=(g(i)-i.innerWidth())/2),n},_compile:function(t,e){this.treeMap.angular("compile",function(){return{elements:t,data:[{dataItem:e}]}})},_getByUid:function(t){return this.element.find(".k-treemap-tile["+m.attr("uid")+"='"+t+"']")},render:function(t){var e,u,i,n,r=this._getByUid(t.dataItem.uid),o=t.children;if(o)for(e=r.find(".k-treemap-wrap"),u=0;u<o.length;u++)i=o[u],n=this._createLeaf(i),e.append(n),this._compile(n.children(),i.dataItem),this.treeMap.trigger(k,{element:n})},createRoot:function(t){var e=this._createLeaf(t);this.element.append(e),this._compile(e.children(),t.dataItem),this.treeMap.trigger(k,{element:e})},_clean:function(t){this.treeMap.angular("cleanup",function(){return{elements:t.children(":not(.k-treemap-wrap)")}}),t.css("background-color",""),t.removeClass("k-leaf"),t.removeClass("k-inverse"),t.empty()},_createLeaf:function(e){return this._createTile(e).css("background-color",e.color).addClass("k-leaf").toggleClass("k-inverse",this._tileColorBrightness(e)>180).append(t("<div></div>").html(this._getText(e)))},_createTile:function(e){var u=t("<div class='k-treemap-tile'></div>");return this.setItemSize(e,u),i(e.dataItem)&&i(e.dataItem.uid)&&u.attr(m.attr("uid"),e.dataItem.uid),u},_itemCoordinates:function(t){var e={width:t.coord.width,height:t.coord.height,left:t.coord.left,top:t.coord.top};return e.width+=e.left&&this.offset?2*this.offset:this.offset,e.height+=e.top?2*this.offset:this.offset,e},setItemSize:function(t,e){var u=this._itemCoordinates(t);e.css({width:u.width,height:u.height,left:u.left,top:u.top})},_getText:function(t){var e=t.text;return this.options.template&&(e=this._renderTemplate(t)),e},_renderTemplate:function(t){var e=B(this.options.template);return e({dataItem:t.dataItem,text:t.text})},_createTitle:function(e){return t("<div class='k-treemap-title'></div>").append(t("<div></div>").html(this._getText(e)))},_createWrap:function(){return t("<div class='k-treemap-wrap'></div>")},_tileColorBrightness:function(t){return d(t.color)}}),U=v.extend({createRoot:function(t,e,u,i){t.coord={width:e,height:u,top:0,left:0},t.vertical=i},init:function(t){this.vertical=t,this.quotient=t?1:0},compute:function(t,e,u){var i,n,r;t.length>0&&(i=e.width,n=e.height,this.vertical?n-=u.text:i-=u.text,r={width:i,height:n,top:0,left:0},this.layoutChildren(t,r))},layoutChildren:function(t,e){var u,i,n=e.width*e.height,r=0,o=[];for(u=0;u<t.length;u++)i=t[u],o[u]=parseFloat(t[u].value),r+=o[u],i.vertical=this.vertical;for(u=0;u<o.length;u++)t[u].area=n*o[u]/r;this.sliceAndDice(t,e)},sliceAndDice:function(t,e){var u=this._totalArea(t);t[0].level%2===this.quotient?this.layoutHorizontal(t,e,u):this.layoutVertical(t,e,u)},layoutHorizontal:function(t,e,u){var i,n,r,o=0;for(i=0;i<t.length;i++)n=t[i],r=n.area/(u/e.width),n.coord={height:e.height,width:r,top:e.top,left:e.left+o},o+=r},layoutVertical:function(t,e,u){var i,n,r,o=0;for(i=0;i<t.length;i++)n=t[i],r=n.area/(u/e.height),n.coord={height:r,width:e.width,top:e.top+o,left:e.left},o+=r},_totalArea:function(t){var e,u=0;for(e=0;e<t.length;e++)u+=t[e].area;return u}}),N=L.extend({htmlSize:function(t){var e,u,i=this._getByUid(t.dataItem.uid),n={text:0,offset:0};return t.children&&(this._clean(i),e=this._getText(t),e&&(u=this._createTitle(t),i.append(u),this._compile(u,t.dataItem),n.text=t.vertical?u.height():u.width()),i.append(this._createWrap()),this.offset=(g(i)-i.innerWidth())/2),n},titleSize:function(t,e){var u;return u=t.vertical?e.children(".k-treemap-title").height():e.children(".k-treemap-title-vertical").width()},_createTitle:function(e){var u;return u=t(e.vertical?"<div class='k-treemap-title'></div>":"<div class='k-treemap-title-vertical'></div>"),u.append(t("<div></div>").html(this._getText(e)))}});w.ui.plugin(T)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e,u){(u||e)()});
//# sourceMappingURL=kendo.dataviz.treemap.min.js.map
